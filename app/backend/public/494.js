"use strict";(self.webpackChunkping_pong_frontend=self.webpackChunkping_pong_frontend||[]).push([[494],{494:(we,C,c)=>{c.r(C),c.d(C,{ProfileModule:()=>Pe});var d=c(6814),u=c(180),b=c(9315),g=c(7522),e=c(2029),_=c(3528),w=c(5148),x=c(833),l=c(6223);function M(n,r){1&n&&(e.TgZ(0,"div",8),e._uU(1,"Offline"),e.qZA())}function T(n,r){1&n&&(e.TgZ(0,"div",8),e._uU(1,"Online"),e.qZA())}function Z(n,r){1&n&&(e.TgZ(0,"div",8),e._uU(1,"Playing"),e.qZA())}const O=function(n){return["/profile",n]};function q(n,r){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4),e._UZ(3,"img",5),e.qZA(),e.TgZ(4,"div",6),e._uU(5),e.qZA(),e.YNc(6,M,2,0,"div",7),e.YNc(7,T,2,0,"div",7),e.YNc(8,Z,2,0,"div",7),e.qZA()()),2&n){const t=e.oxw();e.Q6J("routerLink",e.VKq(7,O,t.user.id)),e.xp6(3),e.hYB("src","",t.domain,"/user/image/",t.user.avatar,"",e.LSH),e.xp6(2),e.Oqu(t.user.username),e.xp6(1),e.Q6J("ngIf",0===t.user.status),e.xp6(1),e.Q6J("ngIf",1===t.user.status),e.xp6(1),e.Q6J("ngIf",2===t.user.status)}}function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",3)(2,"div",4),e._UZ(3,"img",5),e.qZA(),e.TgZ(4,"div",6),e._uU(5),e.qZA(),e.TgZ(6,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.acceptRequest(i.user.id))}),e._uU(7,"Accept"),e.qZA(),e.TgZ(8,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.declineRequest(i.user.id))}),e._uU(9,"Decline"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.hYB("src","",t.domain,"/user/image/",t.user.avatar,"",e.LSH),e.xp6(2),e.Oqu(t.user.username)}}let A=(()=>{class n{constructor(t){this.profileService=t,this.userChangeEvent=new e.vpe,this.domain=g._}acceptRequest(t){this.profileService.acceptRequest(t).subscribe({complete:()=>this.userChangeEvent.emit(!0)})}declineRequest(t){this.profileService.declineRequest(t).subscribe({complete:()=>this.userChangeEvent.emit(!0)})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(_.H))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-friend"]],inputs:{user:"user",type:"type"},outputs:{userChangeEvent:"userChangeEvent"},decls:2,vars:2,consts:[["class","friend",3,"routerLink",4,"ngIf"],["class","request",4,"ngIf"],[1,"friend",3,"routerLink"],[1,"wrapper"],[1,"profile-pic"],[3,"src"],[1,"name"],["class","status",4,"ngIf"],[1,"status"],[1,"request"],[3,"click"]],template:function(o,i){1&o&&(e.YNc(0,q,9,9,"div",0),e.YNc(1,y,10,3,"div",1)),2&o&&(e.Q6J("ngIf","friend"===i.type&&i.user),e.xp6(1),e.Q6J("ngIf","request"===i.type&&i.user))},dependencies:[d.O5,u.rH],styles:[".friend[_ngcontent-%COMP%], .request[_ngcontent-%COMP%]{position:relative;background-color:#2f424a;border:.17dvw solid #2f424a;margin-bottom:.2dvw}.wrapper[_ngcontent-%COMP%]{padding:.5dvw;display:flex;align-items:center;border:.1dvw solid #E8DAB2}.profile-pic[_ngcontent-%COMP%]{display:flex;justify-content:center;width:25%}.profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:.05dvw solid #E8DAB2;border-radius:50%;background-size:cover;height:2dvw;width:2dvw}.name[_ngcontent-%COMP%]{padding-left:0dvw;width:75%;font-family:Quattrocento,serif;font-size:1dvw;font-weight:700;color:#e8dab2;text-overflow:ellipsis;overflow:hidden}.status[_ngcontent-%COMP%]{width:25%;font-family:Quattrocento,serif;font-size:.7dvw;font-weight:700;color:#e8dab2;text-overflow:ellipsis;overflow:hidden}button[_ngcontent-%COMP%]{color:#4f6d7a;background-color:#e8dab2;font-size:.7dvw;font-family:Quattrocento,serif;font-weight:bolder;border:none;cursor:pointer;align-self:center;justify-self:center;height:4dvh;width:8dvw}button[_ngcontent-%COMP%]:hover{background-color:#e9d5a1}.friend[_ngcontent-%COMP%]:hover, .request[_ngcontent-%COMP%]:hover{background-color:#223036;border:.17dvw solid #223036;cursor:pointer}"]})}return n})();function U(n,r){1&n&&(e.TgZ(0,"div",11),e._uU(1,"Won"),e.qZA())}function E(n,r){1&n&&(e.TgZ(0,"div",12),e._uU(1,"Lost"),e.qZA())}const k=function(n){return["/profile",n]};function J(n,r){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2),e.YNc(2,U,2,0,"div",3),e.YNc(3,E,2,0,"div",4),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.TgZ(6,"div",6),e._uU(7,"vs"),e.qZA(),e.TgZ(8,"div",7)(9,"div",8),e._uU(10),e.qZA(),e.TgZ(11,"div",9),e._UZ(12,"img",10),e.qZA()()()()),2&n){const t=e.oxw();e.Q6J("routerLink",e.VKq(8,k,t.match.opponentUser.id)),e.xp6(2),e.Q6J("ngIf","VICTORY"===t.match.matchResult),e.xp6(1),e.Q6J("ngIf","DEFEAT"===t.match.matchResult),e.xp6(2),e.AsE("",t.match.currentUserScore," : ",t.match.opponentUserScore,""),e.xp6(5),e.Oqu(t.match.opponentUser.username),e.xp6(2),e.hYB("src","",t.domain,"/user/image/",t.match.opponentUser.avatar,"",e.LSH)}}let N=(()=>{class n{constructor(){this.domain=g._}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-match"]],inputs:{match:"match"},decls:1,vars:1,consts:[["class","match",3,"routerLink",4,"ngIf"],[1,"match",3,"routerLink"],[1,"wrapper"],["class","result-win",4,"ngIf"],["class","result-loss",4,"ngIf"],[1,"score"],[1,"versus"],[1,"opponent"],[1,"name"],[1,"pic"],[3,"src"],[1,"result-win"],[1,"result-loss"]],template:function(o,i){1&o&&e.YNc(0,J,13,10,"div",0),2&o&&e.Q6J("ngIf",i.match)},dependencies:[d.O5,u.rH],styles:[".match[_ngcontent-%COMP%]{position:relative;background-color:#e8dab2;border:.17dvw solid #E8DAB2;margin-bottom:.2dvw}.wrapper[_ngcontent-%COMP%]{padding:.5dvw 1.5dvw;border:.1dvw solid #2f424a;display:flex;justify-content:space-between;align-items:center}.result-win[_ngcontent-%COMP%], .result-loss[_ngcontent-%COMP%]{font-family:Quattrocento,serif;font-size:1dvw;font-weight:700;font-style:italic}.result-win[_ngcontent-%COMP%]{color:#618b4a}.result-loss[_ngcontent-%COMP%]{color:#b04343}.score[_ngcontent-%COMP%], .versus[_ngcontent-%COMP%]{font-family:Quattrocento,serif;font-size:1dvw;font-weight:700;color:#2f424a;overflow:hidden}.opponent[_ngcontent-%COMP%]{display:flex;align-items:center}.name[_ngcontent-%COMP%]{padding-right:.5dvw;font-family:Quattrocento,serif;font-size:1dvw;font-weight:700;color:#2f424a;text-overflow:ellipsis;overflow:hidden}.name[_ngcontent-%COMP%]:hover{cursor:pointer;color:#223036}.pic[_ngcontent-%COMP%]{display:flex;justify-content:center}img[_ngcontent-%COMP%]{border:.05dvw solid #2f424a;border-radius:50%;background-size:cover;height:2dvw;width:2dvw}"]})}return n})();function F(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",3),e._uU(2,"Please enter the email address where you'd like to enable two-factor authentication:"),e.qZA(),e.TgZ(3,"input",4,5),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.email=i)}),e.qZA(),e.TgZ(5,"div",6)(6,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeDialog())}),e._uU(7,"Close"),e.qZA(),e.TgZ(8,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sendEmail())}),e._uU(9,"Use email"),e.qZA()()()}if(2&n){const t=e.MAs(4),o=e.oxw();e.xp6(3),e.ekj("is-invalid",t.invalid),e.Q6J("ngModel",o.email),e.xp6(5),e.ekj("btn-invalid",t.invalid),e.Q6J("disabled",t.invalid)}}function I(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",9),e._uU(2,"Enter the verification code sent to your email:"),e.qZA(),e.TgZ(3,"input",10,11),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.code=i)}),e.qZA(),e.TgZ(5,"div",6)(6,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeDialog())}),e._uU(7,"Close"),e.qZA(),e.TgZ(8,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.verifyEmail())}),e._uU(9,"Verify"),e.qZA()()()}if(2&n){const t=e.MAs(4),o=e.oxw();e.xp6(3),e.ekj("is-invalid",t.invalid),e.Q6J("ngModel",o.code),e.xp6(5),e.ekj("btn-invalid",t.invalid),e.Q6J("disabled",t.invalid)}}function S(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2,"Your email has been successfully verified. From now on, whenever you log in, you will receive a security code in your inbox to enter."),e.qZA(),e.TgZ(3,"div",6)(4,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeDialog())}),e._uU(5,"Close"),e.qZA()()()}}function R(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2,"Your email hasn't been successfully verified. Please try again."),e.qZA(),e.TgZ(3,"div",6)(4,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeDialog())}),e._uU(5,"Close"),e.qZA()()()}}let Q=(()=>{class n{constructor(t,o){this.profileService=t,this.cd=o,this.showDialog=!1,this.closeDialogEvent=new e.vpe,this.verificationStep="sendEmail",this.email="",this.code=""}sendEmail(){this.profileService.enable2FA(this.email).subscribe(t=>this.profileService.enableSend2FA().subscribe()),this.verificationStep="sendCode",this.cd.detectChanges()}verifyEmail(){this.profileService.verificationEnable2FA(this.code).subscribe({next:()=>this.verificationStep="verified",error:()=>this.verificationStep="unverified"})}closeDialog(){this.verificationStep="sendEmail",this.email="",this.code="",this.showDialog=!1,this.closeDialogEvent.emit(this.showDialog)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(_.H),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-twofactorauth"]],inputs:{showDialog:"showDialog"},outputs:{closeDialogEvent:"closeDialogEvent"},decls:6,vars:5,consts:[[1,"dialog-overlay"],[1,"dialog-box",3,"ngSwitch"],[4,"ngSwitchCase"],["for","email"],["type","email","id","emailInput","required","",1,"email",3,"ngModel","ngModelChange"],["emailInput","ngModel"],[1,"buttons"],[3,"click"],[1,"rightbtn",3,"disabled","click"],["for","code"],["type","text","id","code","required","","minlength","8","maxlength","8",1,"code",3,"ngModel","ngModelChange"],["codeInput","ngModel"],[1,"leftbtn",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,F,10,6,"div",2),e.YNc(3,I,10,6,"div",2),e.YNc(4,S,6,0,"div",2),e.YNc(5,R,6,0,"div",2),e.qZA()()),2&o&&(e.xp6(1),e.s9C("ngSwitch",i.verificationStep),e.xp6(1),e.Q6J("ngSwitchCase","sendEmail"),e.xp6(1),e.Q6J("ngSwitchCase","sendCode"),e.xp6(1),e.Q6J("ngSwitchCase","verified"),e.xp6(1),e.Q6J("ngSwitchCase","unverified"))},dependencies:[d.RF,d.n9,l.Fj,l.JJ,l.Q7,l.wO,l.nD,l.On],styles:[".dialog-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;box-sizing:border-box;display:flex;align-items:center;justify-content:center;z-index:1000;background:rgba(0,0,0,.6)}.dialog-box[_ngcontent-%COMP%]{width:30%;height:30%;background-color:#4f6d7a;border:.7dvw solid #E8DAB2;display:flex;flex-direction:column;align-items:center;justify-content:center}.buttons[_ngcontent-%COMP%]{position:relative;margin-left:10%;margin-right:10%;width:79.5%;margin-top:2%;display:flex;direction:row}button[_ngcontent-%COMP%]{color:#4f6d7a;background-color:#e8dab2;font-size:1dvw;font-family:Quattrocento,serif;font-weight:bolder;cursor:pointer;height:5dvh;width:8dvw;border:.2dvh solid #2f424a}button[_ngcontent-%COMP%]:hover{background-color:#e9d5a1}.btn-invalid[_ngcontent-%COMP%], .btn-invalid[_ngcontent-%COMP%]:hover{color:#2b3a41;background-color:#988e6f}.rightbtn[_ngcontent-%COMP%]{position:absolute;right:0}label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{display:block;margin-left:10%;margin-right:10%;font-size:1dvw;font-family:Quattrocento,serif;font-weight:bolder;color:#e8dab2}p[_ngcontent-%COMP%]{line-height:1.3dvw}input[_ngcontent-%COMP%]{display:block;margin-left:10%;margin-right:10%;margin-top:3%;padding:3%;width:74%;font-size:.9dvw;font-family:Quattrocento,serif;font-weight:bolder;border:none;border-bottom:.1dvw solid #E8DAB2;background-color:#425c68;color:#e8dab2;outline:none}.is-invalid[_ngcontent-%COMP%]{border-bottom:.1dvw solid #b04343}"]})}return n})();function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-twofactorauth",35),e.NdJ("closeDialogEvent",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toggle2FADialog(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("showDialog",t.isbuttonClicked2FA)}}function D(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",36),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(7);return e.KtG(i.click())}),e._UZ(1,"img",37),e.qZA()}}function z(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"input",39,40),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.userProfile.user.username=i)}),e.qZA(),e.TgZ(3,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeName())}),e._uU(4,"Change"),e.qZA()()}if(2&n){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.ekj("is-invalid",t.invalid),e.Q6J("ngModel",o.userProfile.user.username),e.xp6(2),e.ekj("btn-invalid",t.invalid),e.Q6J("disabled",t.invalid)}}function H(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",42)(1,"input",43,44),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.userProfile.user.title=i)}),e.qZA(),e.TgZ(3,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeTitle())}),e._uU(4,"Change"),e.qZA()()}if(2&n){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.ekj("is-invalid",t.invalid),e.Q6J("ngModel",o.userProfile.user.title),e.xp6(2),e.ekj("btn-invalid",t.invalid),e.Q6J("disabled",t.invalid)}}function B(n,r){1&n&&e._UZ(0,"div",49)}function j(n,r){1&n&&(e.TgZ(0,"h2"),e._uU(1,"Offline"),e.qZA())}function K(n,r){1&n&&e._UZ(0,"div",50)}function G(n,r){1&n&&(e.TgZ(0,"h2"),e._uU(1,"Online"),e.qZA())}function L(n,r){1&n&&e._UZ(0,"div",51)}function V(n,r){1&n&&(e.TgZ(0,"h2"),e._uU(1,"Playing"),e.qZA())}function W(n,r){if(1&n&&(e.TgZ(0,"div",45),e.YNc(1,B,1,0,"div",46),e.YNc(2,j,2,0,"h2",32),e.YNc(3,K,1,0,"div",47),e.YNc(4,G,2,0,"h2",32),e.YNc(5,L,1,0,"div",48),e.YNc(6,V,2,0,"h2",32),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",0===(null==t.userProfile||null==t.userProfile.user?null:t.userProfile.user.status)),e.xp6(1),e.Q6J("ngIf",0===(null==t.userProfile||null==t.userProfile.user?null:t.userProfile.user.status)),e.xp6(1),e.Q6J("ngIf",1===(null==t.userProfile||null==t.userProfile.user?null:t.userProfile.user.status)),e.xp6(1),e.Q6J("ngIf",1===(null==t.userProfile||null==t.userProfile.user?null:t.userProfile.user.status)),e.xp6(1),e.Q6J("ngIf",2===(null==t.userProfile||null==t.userProfile.user?null:t.userProfile.user.status)),e.xp6(1),e.Q6J("ngIf",2===(null==t.userProfile||null==t.userProfile.user?null:t.userProfile.user.status))}}function X(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sendRequest())}),e._uU(1,"Add friend"),e.qZA()}}function $(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeFriend())}),e._uU(1,"Remove friend"),e.qZA()}}function ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.getSentRequests())}),e._uU(1,"Request Pending"),e.qZA()}}function te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.enable2FA())}),e._uU(1,"Enable 2FA"),e.qZA()}}function ne(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.disable2FA())}),e._uU(1,"Disable 2FA"),e.qZA()}}function ie(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.logout())}),e._uU(1,"Logout"),e.qZA()}}function oe(n,r){if(1&n&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.userProfile.rank)}}function re(n,r){1&n&&(e.TgZ(0,"h2"),e._uU(1,"None"),e.qZA())}function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectTab("friends"))}),e.TgZ(2,"h1"),e._uU(3,"Friends:"),e.qZA()(),e.TgZ(4,"div",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectTab("requests"))}),e.TgZ(5,"h1"),e._uU(6,"Requests:"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.ekj("selected","friends"===t.selectedTab),e.xp6(3),e.ekj("selected","requests"===t.selectedTab)}}function le(n,r){1&n&&(e.TgZ(0,"div",55)(1,"h1"),e._uU(2,"Friends:"),e.qZA()())}function ce(n,r){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-friend",58),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("user",t)("type","friend")}}function de(n,r){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,ce,2,2,"div",57),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.userProfile.friends)}}function ae(n,r){1&n&&(e.TgZ(0,"div",59)(1,"h1"),e._uU(2,"No friends"),e.qZA(),e.TgZ(3,"h2"),e._uU(4,"play sad violin music"),e.qZA()())}function ue(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"app-friend",61),e.NdJ("userChangeEvent",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.getReceivedRequests())}),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("user",t)("type","request")}}function fe(n,r){if(1&n&&(e.TgZ(0,"div",60),e.YNc(1,ue,2,2,"div",57),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.userProfile.receivedRequests)}}function ge(n,r){1&n&&(e.TgZ(0,"div",62)(1,"h1"),e._uU(2,"No requests"),e.qZA(),e.TgZ(3,"h2"),e._uU(4,"no one wants to be your friend lol"),e.qZA()())}function _e(n,r){1&n&&(e.TgZ(0,"h1"),e._uU(1,"Match History:"),e.qZA())}function pe(n,r){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-match",64),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("match",t)}}function he(n,r){if(1&n&&(e.TgZ(0,"div",63),e.YNc(1,pe,2,1,"div",57),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.userProfile.matches)}}function me(n,r){1&n&&(e.TgZ(0,"div",65)(1,"h1"),e._uU(2,"No matches played"),e.qZA()())}var a=function(n){return n[n.CURRENTUSER=0]="CURRENTUSER",n[n.USERPROFILE=1]="USERPROFILE",n}(a||{});let P=(()=>{class n{constructor(t,o,i,s){this.profileService=t,this.route=o,this.cd=i,this.auth=s,this.domain=g._,this.id=null,this.selectedImage=null,this.isEditingName=!1,this.isEditingTitle=!1,this.isbuttonClicked2FA=!1,this.selectedTab="friends",this.userProfile=this.initUserProfile(),this.currentUserProfile=this.initUserProfile()}initUserProfile(){return{user:{id:"",username:"",title:"",avatar:"",email:"",status:0,mfaEnabled:!1,mfaStatus:0},friends:[],receivedRequests:[],sentRequests:[],matches:[],rank:0,stats:{wins:0,losses:0}}}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),null===this.id?this.getCurrentUserProfile(a.USERPROFILE):(this.getUserProfileFromID(this.id,a.USERPROFILE),this.getCurrentUserProfile(a.CURRENTUSER),this.profileService.requestStatus(this.id))})}handleError(t){alert(t.message)}getCurrentUserProfile(t){let o=this.initUserProfile();(0,b.D)({currentUser:this.profileService.getCurrentUser(),friends:this.profileService.getCurrentUserFriends(),receivedRequests:this.profileService.getCurrentUserReceivedRequests(),sentRequests:this.profileService.getCurrentUserSentRequests(),rank:this.profileService.getCurrentUserRank(),stats:this.profileService.getCurrentUserStats(),history:this.profileService.getCurrentUserHistory()}).subscribe({next:({currentUser:i,friends:s,receivedRequests:f,sentRequests:p,rank:h,stats:m,history:v})=>{o={user:i,friends:s,receivedRequests:f,sentRequests:p,matches:v,rank:h,stats:m},t===a.CURRENTUSER?this.currentUserProfile=o:this.userProfile=o},error:i=>this.handleError(i)})}getUserProfileFromID(t,o){let i=this.initUserProfile();t&&(0,b.D)({user:this.profileService.getUser(t),friends:this.profileService.getFriends(t),rank:this.profileService.getRank(t),stats:this.profileService.getStats(t),history:this.profileService.getHistory(t)}).subscribe({next:({user:s,friends:f,rank:p,stats:h,history:m})=>{i={user:s,friends:f,receivedRequests:[],sentRequests:[],matches:m,rank:p,stats:h},o===a.CURRENTUSER?this.currentUserProfile=i:this.userProfile=i,this.profileService.statusListener().subscribe(v=>this.userProfile.user.status=v)},error:s=>this.handleError(s)})}canSendRequest(){return null!==this.id&&this.id!==this.currentUserProfile?.user.id&&!this.isFriendsWithCurrentUser()&&!this.isRequestSent()}isFriendsWithCurrentUser(){return void 0!==this.userProfile&&void 0!==this.currentUserProfile&&this.userProfile.friends.some(t=>t.id===this.currentUserProfile?.user.id)}isRequestSent(){return void 0!==this.userProfile&&void 0!==this.currentUserProfile&&this.currentUserProfile.sentRequests.some(t=>t.id===this.userProfile?.user.id)}sendRequest(){this.id&&this.profileService.sendRequest(this.id).subscribe(t=>this.currentUserProfile.sentRequests=t.sentFriendRequests)}removeFriend(){this.id&&this.profileService.removeFriend(this.id).subscribe(t=>this.userProfile.friends=t.friends)}toggleNameEdit(){this.isEditingName=!this.isEditingName,this.cd.detectChanges()}toggleTitleEdit(){this.isEditingTitle=!this.isEditingTitle,this.cd.detectChanges()}changeName(){this.isEditingName=!1,this.profileService.setName(this.userProfile.user.username)}changeTitle(){this.isEditingTitle=!1,this.profileService.setTitle(this.userProfile.user.title)}onImageSelected(t){if(this.selectedImage=t.target.files[0],this.selectedImage&&this.selectedImage.size<1e7){const o=new FormData;o.append("image",this.selectedImage,this.selectedImage.name),this.profileService.setAvatar(o).subscribe({next:i=>this.userProfile.user=i,error:i=>alert(i.message)})}else alert("File too big!")}toggle2FADialog(t){!1===t&&this.profileService.getCurrentUser().subscribe(o=>this.userProfile.user.mfaEnabled=o.mfaEnabled),this.isbuttonClicked2FA=!this.isbuttonClicked2FA,this.cd.detectChanges()}enable2FA(){this.toggle2FADialog(!0)}disable2FA(){this.profileService.disable2FA().subscribe(t=>this.userProfile.user.mfaEnabled=t.mfaEnabled)}logout(){this.auth.logout()}selectTab(t){"friends"===t?(this.selectedTab="friends",this.getFriends()):(this.selectedTab="requests",this.getReceivedRequests())}getFriends(){this.profileService.getCurrentUserFriends().subscribe({next:t=>this.userProfile.friends=t,complete:()=>{this.id&&this.profileService.getFriends(this.id).subscribe(t=>this.userProfile.friends=t)}})}getSentRequests(){this.profileService.getCurrentUserSentRequests().subscribe(t=>this.currentUserProfile.sentRequests=t),this.getFriends()}getReceivedRequests(){this.profileService.getCurrentUserReceivedRequests().subscribe(t=>this.userProfile.receivedRequests=t)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(_.H),e.Y36(u.gz),e.Y36(e.sBO),e.Y36(w.e))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],decls:55,vars:29,consts:[[3,"showDialog","closeDialogEvent",4,"ngIf"],[1,"profile-interface"],[1,"info-container"],[1,"profile-pic"],["type","file","accept","image/*",3,"change"],["imageUpload",""],["crossorigin","use-credentials",1,"ppic",3,"src"],["class","edit-image",3,"click",4,"ngIf"],[1,"username",3,"click"],["class","name-input-container",4,"ngIf"],[1,"title",3,"click"],["class","title-input-container",4,"ngIf"],["class","status",4,"ngIf"],[3,"click",4,"ngIf"],["class","removeFriend",3,"click",4,"ngIf"],["class","logout",3,"click",4,"ngIf"],[1,"stats-container"],[1,"upper-row"],[1,"level"],[4,"ngIf","ngIfElse"],["no_rank",""],[1,"wins-losses"],[1,"matches-played"],[1,"bottom-row"],[1,"friends"],[1,"wrapper"],["class","friend-sections",4,"ngIf"],["class","friends-container",4,"ngIf"],["class","no-friends",4,"ngIf"],["class","requests-container",4,"ngIf"],["class","no-requests",4,"ngIf"],[1,"match-history"],[4,"ngIf"],["class","matches-container",4,"ngIf"],["class","no-matches",4,"ngIf"],[3,"showDialog","closeDialogEvent"],[1,"edit-image",3,"click"],["src","data:image/svg+xml,%3Csvg width='487' height='487' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3E%3Cg class='layer'%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg id='svg_1'%3E%3Cg id='svg_2'%3E%3Cpath d='m308.1,277.95c0,35.7 -28.9,64.6 -64.6,64.6s-64.6,-28.9 -64.6,-64.6s28.9,-64.6 64.6,-64.6s64.6,28.9 64.6,64.6zm132.2,-161.9c25.8,0 46.7,20.9 46.7,46.7l0,122.4l0,103.8c0,27.5 -22.3,49.8 -49.8,49.8l-387.4,0c-27.5,0 -49.8,-22.3 -49.8,-49.8l0,-103.9l0,-122.3l0,0c0,-25.8 20.9,-46.7 46.7,-46.7l93.4,0l4.4,-18.6c6.7,-28.8 32.4,-49.2 62,-49.2l74.1,0c29.6,0 55.3,20.4 62,49.2l4.3,18.6l93.4,0zm-342.9,67.4c0,-12.9 -10.5,-23.4 -23.4,-23.4c-13,0 -23.5,10.5 -23.5,23.4s10.5,23.4 23.4,23.4c13,0.1 23.5,-10.4 23.5,-23.4zm261.3,94.5c0,-63.6 -51.6,-115.2 -115.2,-115.2s-115.2,51.6 -115.2,115.2s51.6,115.2 115.2,115.2s115.2,-51.6 115.2,-115.2z' fill='%23ffffff' id='svg_3'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E"],[1,"name-input-container"],["type","text","id","username","required","","minlength","2","maxlength","10","pattern","[^\\s]*",1,"name-input",3,"ngModel","ngModelChange"],["username","ngModel"],[1,"change-btn",3,"disabled","click"],[1,"title-input-container"],["type","text","id","usertitle","required","","minlength","2","maxlength","25",1,"title-input",3,"ngModel","ngModelChange"],["usertitle","ngModel"],[1,"status"],["class","dot-offline",4,"ngIf"],["class","dot-online",4,"ngIf"],["class","dot-playing",4,"ngIf"],[1,"dot-offline"],[1,"dot-online"],[1,"dot-playing"],[3,"click"],[1,"removeFriend",3,"click"],[1,"logout",3,"click"],[1,"friend-sections"],[1,"friends-container"],[4,"ngFor","ngForOf"],[3,"user","type"],[1,"no-friends"],[1,"requests-container"],[3,"user","type","userChangeEvent"],[1,"no-requests"],[1,"matches-container"],[3,"match"],[1,"no-matches"]],template:function(o,i){if(1&o&&(e.TgZ(0,"body"),e._UZ(1,"app-navbar"),e.YNc(2,Y,1,1,"app-twofactorauth",0),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"input",4,5),e.NdJ("change",function(f){return i.onImageSelected(f)}),e.qZA(),e._UZ(8,"img",6),e.YNc(9,D,2,0,"div",7),e.qZA(),e.TgZ(10,"h1",8),e.NdJ("click",function(){return i.toggleNameEdit()}),e._uU(11),e.qZA(),e.YNc(12,z,5,6,"div",9),e.TgZ(13,"h2",10),e.NdJ("click",function(){return i.toggleTitleEdit()}),e._uU(14),e.qZA(),e.YNc(15,H,5,6,"div",11),e.YNc(16,W,7,6,"div",12),e.YNc(17,X,2,0,"button",13),e.YNc(18,$,2,0,"button",14),e.YNc(19,ee,2,0,"button",13),e.YNc(20,te,2,0,"button",13),e.YNc(21,ne,2,0,"button",13),e.YNc(22,ie,2,0,"button",15),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"div",18)(26,"h1"),e._uU(27,"Rank:"),e.qZA(),e.YNc(28,oe,2,1,"h2",19),e.YNc(29,re,2,0,"ng-template",null,20,e.W1O),e.qZA(),e.TgZ(31,"div",21)(32,"h1"),e._uU(33,"Wins : Losses"),e.qZA(),e.TgZ(34,"h2"),e._uU(35),e.qZA()(),e.TgZ(36,"div",22)(37,"h1"),e._uU(38,"Matches played:"),e.qZA(),e.TgZ(39,"h2"),e._uU(40),e.qZA()()(),e.TgZ(41,"div",23)(42,"div",24)(43,"div",25),e.YNc(44,se,7,4,"div",26),e.YNc(45,le,3,0,"div",26),e.YNc(46,de,2,1,"div",27),e.YNc(47,ae,5,0,"div",28),e.YNc(48,fe,2,1,"div",29),e.YNc(49,ge,5,0,"div",30),e.qZA()(),e.TgZ(50,"div",31)(51,"div",25),e.YNc(52,_e,2,0,"h1",32),e.YNc(53,he,2,1,"div",33),e.YNc(54,me,3,0,"div",34),e.qZA()()()()()()),2&o){const s=e.MAs(30);e.xp6(2),e.Q6J("ngIf",i.isbuttonClicked2FA),e.xp6(6),e.hYB("src","",i.domain,"/user/image/",i.userProfile.user.avatar,"",e.LSH),e.xp6(1),e.Q6J("ngIf",null===i.id),e.xp6(2),e.Oqu(i.userProfile.user.username),e.xp6(1),e.Q6J("ngIf",null===i.id&&i.isEditingName),e.xp6(2),e.Oqu(i.userProfile.user.title),e.xp6(1),e.Q6J("ngIf",null===i.id&&i.isEditingTitle),e.xp6(1),e.Q6J("ngIf",null!==i.id&&i.id!==i.currentUserProfile.user.id),e.xp6(1),e.Q6J("ngIf",i.canSendRequest()),e.xp6(1),e.Q6J("ngIf",i.isFriendsWithCurrentUser()),e.xp6(1),e.Q6J("ngIf",i.isRequestSent()),e.xp6(1),e.Q6J("ngIf",null===i.id&&0==i.userProfile.user.mfaEnabled),e.xp6(1),e.Q6J("ngIf",null===i.id&&1==i.userProfile.user.mfaEnabled),e.xp6(1),e.Q6J("ngIf",null===i.id),e.xp6(6),e.Q6J("ngIf",i.userProfile.rank>0)("ngIfElse",s),e.xp6(7),e.AsE("",i.userProfile.stats.wins,":",i.userProfile.stats.losses,""),e.xp6(5),e.Oqu(i.userProfile.stats.wins+i.userProfile.stats.losses),e.xp6(4),e.Q6J("ngIf",null===i.id),e.xp6(1),e.Q6J("ngIf",i.currentUserProfile&&i.currentUserProfile.user&&null!==i.id),e.xp6(1),e.Q6J("ngIf","friends"===i.selectedTab&&i.userProfile.friends.length),e.xp6(1),e.Q6J("ngIf","friends"===i.selectedTab&&!i.userProfile.friends.length),e.xp6(1),e.Q6J("ngIf","requests"===i.selectedTab&&i.userProfile.receivedRequests.length),e.xp6(1),e.Q6J("ngIf","requests"===i.selectedTab&&!i.userProfile.receivedRequests.length),e.xp6(3),e.Q6J("ngIf",i.userProfile.matches.length),e.xp6(1),e.Q6J("ngIf",i.userProfile.matches.length),e.xp6(1),e.Q6J("ngIf",!i.userProfile.matches.length)}},dependencies:[d.sg,d.O5,x.S,l.Fj,l.JJ,l.Q7,l.wO,l.nD,l.c5,l.On,A,N,Q],styles:['@import"https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@1,6..96,700&display=swap";@import"https://fonts.googleapis.com/css2?family=Quattrocento:wght@700&display=swap";@import"https://db.onlinewebfonts.com/c/eaa110aa369eee0cf5c29493c362bbef?family=Bodoni+MT+Poster+Compressed+V2";body[_ngcontent-%COMP%]{background-color:#4f6d7a;position:relative}.profile-interface[_ngcontent-%COMP%]{width:80%;height:77%;margin:auto;display:flex}button[_ngcontent-%COMP%]{margin-top:3%;color:#4f6d7a;background-color:#e8dab2;font-size:1dvw;font-family:Quattrocento,serif;font-weight:bolder;border:none;cursor:pointer;align-self:center;justify-self:center;height:4dvh;width:10dvw}button[_ngcontent-%COMP%]:hover{background-color:#e9d5a1}.info-container[_ngcontent-%COMP%]{width:30%;border:.7dvw solid #E8DAB2;display:flex;flex-flow:column;align-items:center}.profile-pic[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10%}.profile-pic[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.profile-pic[_ngcontent-%COMP%]   .ppic[_ngcontent-%COMP%]{border:.2dvw solid #2f424a;border-radius:50%;clip-path:circle();background-size:cover;height:12dvw;width:12dvw;object-fit:cover;object-position:center}.edit-image[_ngcontent-%COMP%]{position:fixed;opacity:0%;background-color:#2f424a;border-radius:50%;clip-path:circle();height:12.2dvw;width:12.5dvw}.edit-image[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:50%}.edit-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4.5dvw;margin-left:4dvw;margin-top:3.7dvw}.username[_ngcontent-%COMP%]{margin:3% 0% 0%;font-family:Bodoni Moda,serif;font-size:3dvw;color:#e8dab2}.username[_ngcontent-%COMP%]:hover, .title[_ngcontent-%COMP%]:hover{cursor:pointer}.title[_ngcontent-%COMP%]{margin:0%;font-family:Bodoni Moda,serif;font-size:1.5dvw;color:#2f424a}.name-input-container[_ngcontent-%COMP%], .title-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}input[_ngcontent-%COMP%]{padding:2% 2% 2% 4%;width:70%;box-sizing:border-box;height:100%;font-size:.9dvw;font-family:Quattrocento,serif;font-weight:bolder;border:none;border-bottom:.1dvw solid #E8DAB2;border-top:.1dvw solid #425c68;background-color:#425c68;color:#e8dab2;outline:none}.is-invalid[_ngcontent-%COMP%]{border-bottom:.1dvw solid #b04343}.change-btn[_ngcontent-%COMP%]{margin-top:0%;font-size:1dvw;height:2.4dvw;width:4.5dvw;border:.2dvh solid #2f424a}.btn-invalid[_ngcontent-%COMP%], .btn-invalid[_ngcontent-%COMP%]:hover{color:#2b3a41;background-color:#988e6f}.status[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:center;margin-top:3%}.status[_ngcontent-%COMP%]   .dot-online[_ngcontent-%COMP%]{height:1dvw;width:1dvw;background-color:#618b4a;border-radius:50%}.status[_ngcontent-%COMP%]   .dot-offline[_ngcontent-%COMP%]{height:1dvw;width:1dvw;background-color:#8b4a4a;border-radius:50%}.status[_ngcontent-%COMP%]   .dot-playing[_ngcontent-%COMP%]{height:1dvw;width:1dvw;background-color:#e1ce23;border-radius:50%}.status[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0% 0% 0% 2%;font-family:Quattrocento,serif;font-weight:bolder;font-size:1.2dvw;color:#e8dab2}.logout[_ngcontent-%COMP%], .removeFriend[_ngcontent-%COMP%]{color:#b04343}.stats-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:5% 0 0;padding:0;height:10%;align-self:center;display:flex;align-items:center;font-family:Bodoni Moda,serif;font-size:1.5dvw;color:#e8dab2}.stats-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:0;align-self:center;width:80%;max-width:80%;display:flex;justify-content:center;font-family:Bodoni MT Poster Compressed V2;font-size:9.5dvw;font-weight:400;color:#2f424a}.stats-container[_ngcontent-%COMP%]{margin-left:1%;width:70%;border:.7dvw solid #E8DAB2;display:flex;flex-flow:column}.upper-row[_ngcontent-%COMP%]{border-bottom:.35dvw solid #E8DAB2;height:35%;display:flex;align-items:center}.bottom-row[_ngcontent-%COMP%]{border-top:.35dvw solid #E8DAB2;height:65%;display:flex;align-items:center}.level[_ngcontent-%COMP%]{width:30%;height:100%;border-right:.7dvw solid #E8DAB2;display:flex;flex-direction:column;overflow:hidden}.wins-losses[_ngcontent-%COMP%]{width:40%;height:100%;display:flex;flex-direction:column;background-color:#2f424a}.wins-losses[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .wins-losses[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e8dab2}.matches-played[_ngcontent-%COMP%]{width:30%;height:100%;display:flex;flex-direction:column;border-left:.7dvw solid #E8DAB2}.friends[_ngcontent-%COMP%]{width:50%;height:100%;border-right:.7dvw solid #E8DAB2}.friends[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background-color:#e8dab2;border:.7dvw solid #4F6D7A;box-sizing:border-box}.friend-sections[_ngcontent-%COMP%]{width:100%;height:15%;display:flex;align-items:center;justify-content:center}.friend-sections[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;height:100%;display:flex;align-items:center;justify-self:center;border:.1dvw solid #E8DAB2}.friend-sections[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{cursor:pointer}.friend-sections[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#e9d5a1;border:.1dvw solid #e9d5a1;border-bottom:.1dvw solid #2b3a41}.friend-sections[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2dvw;margin:auto;color:#2f424a}.friends-container[_ngcontent-%COMP%], .requests-container[_ngcontent-%COMP%]{margin:1dvw 2dvw 2dvw;overflow:auto}.no-friends[_ngcontent-%COMP%], .no-requests[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-content:center;height:70%}.no-friends[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .no-requests[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Bodoni Moda,serif;font-size:2dvw;margin:0%;padding:0%;color:#2f424a}.no-friends[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .no-requests[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Bodoni Moda,serif;font-size:1dvw;margin:0%;padding:0%;color:#2f424a}.match-history[_ngcontent-%COMP%]{width:50%;height:100%}.match-history[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background-color:#2f424a;border:.7dvw solid #4F6D7A;box-sizing:border-box}.matches-container[_ngcontent-%COMP%]{margin:1dvw 2dvw 2dvw;overflow:auto}.no-matches[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-content:center;height:100%}.no-matches[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Bodoni Moda,serif;font-size:2dvw}']})}return n})();const ve=[{path:"",component:P},{path:":id",component:P}];let Ce=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(ve),u.Bz]})}return n})();var be=c(6208);let Pe=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.ez,Ce,be.m,l.u5]})}return n})()}}]);